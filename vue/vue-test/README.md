## å…·ä½“æ­¥éª¤

1. å¦‚æœä¸‹è½½ç¼“æ…¢è¯·é…ç½® npm æ·˜å®é•œåƒ npm config set registry http://registry.npm.taobao.org
2. å…¨å±€å®‰è£… @vue/cli npm install -g @vue/cli
3. åˆ‡æ¢åˆ°åˆ›å»ºé¡¹ç›®çš„ç›®å½•ï¼Œä½¿ç”¨å‘½ä»¤åˆ›å»ºé¡¹ç›® vue create xxx
4. é€‰æ‹©ä½¿ç”¨ vue çš„ç‰ˆæœ¬
5. å¯åŠ¨é¡¹ç›® npm run serve
6. æ‰“åŒ…é¡¹ç›® npm run build
7. æš‚åœé¡¹ç›® Ctrl+C

> Vue è„šæ‰‹æ¶éšè—äº†æ‰€æœ‰ webpack ç›¸å…³çš„é…ç½®ï¼Œè‹¥æƒ³æŸ¥çœ‹å…·ä½“çš„ webpack é…ç½®ï¼Œè¯·æ‰§è¡Œ
> vue inspect > output.js

## è„šæ‰‹æ¶æ–‡ä»¶ç»“æ„

.æ–‡ä»¶ç›®å½•
â”œâ”€â”€ node_modules
â”œâ”€â”€ public
â”‚ â”œâ”€â”€ favicon.ico: é¡µç­¾å›¾æ ‡
â”‚ â””â”€â”€ index.html: ä¸»é¡µé¢
â”œâ”€â”€ src
â”‚ â”œâ”€â”€ assets: å­˜æ”¾é™æ€èµ„æº
â”‚ â”‚ â””â”€â”€ logo.png
â”‚ â”‚â”€â”€ component: å­˜æ”¾ç»„ä»¶
â”‚ â”‚ â””â”€â”€ HelloWorld.vue
â”‚ â”‚â”€â”€ App.vue: æ±‡æ€»æ‰€æœ‰ç»„ä»¶
â”‚ â””â”€â”€ main.js: å…¥å£æ–‡ä»¶
â”œâ”€â”€ .gitignore: git ç‰ˆæœ¬ç®¡åˆ¶å¿½ç•¥çš„é…ç½®
â”œâ”€â”€ babel.config.js: babel çš„é…ç½®æ–‡ä»¶
â”œâ”€â”€ package.json: åº”ç”¨åŒ…é…ç½®æ–‡ä»¶
â”œâ”€â”€ README.md: åº”ç”¨æè¿°æ–‡ä»¶
â””â”€â”€ package-lock.json: åŒ…ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶

## ä¸åŒç‰ˆæœ¬ vue è¯´æ˜

1. vue.js ä¸ vue.runtime.xxx.js çš„åŒºåˆ«
   a. vue.js æ˜¯å®Œæ•´ç‰ˆçš„ Vueï¼ŒåŒ…å«ï¼šæ ¸å¿ƒåŠŸèƒ½+æ¨¡æ¿è§£æå™¨
   b. vue.runtime.xxx.js æ˜¯è¿è¡Œç‰ˆçš„ Vueï¼ŒåªåŒ…å«æ ¸å¿ƒåŠŸèƒ½ï¼Œæ²¡æœ‰æ¨¡æ¿è§£æå™¨, esm å°±æ˜¯ ES6 module
2. å› ä¸º vue.runtime.xxx.js æ²¡æœ‰æ¨¡æ¿è§£æå™¨ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨ template é…ç½®é¡¹ï¼Œéœ€è¦ä½¿ç”¨ render å‡½æ•°æ¥æ”¶åˆ°çš„ createElement å‡½æ•°å»æŒ‡å®šå…·ä½“å†…å®¹

## é…ç½®æ–‡ä»¶

vue inspect > output.js å¯ä»¥æŸ¥çœ‹åˆ° Vue è„šæ‰‹æ¶çš„é»˜è®¤é…ç½®
ä½¿ç”¨ vue.config.js å¯ä»¥å¯¹è„šæ‰‹æ¶è¿›è¡Œä¸ªæ€§åŒ–å®šåˆ¶ï¼Œå’Œ package.json åŒçº§ç›®å½•ï¼Œ
è¯¦è§ é…ç½®å‚è€ƒ | Vue CLI https://cli.vuejs.org/zh/config/#vue-config-js

## ref å±æ€§

ref è¢«ç”¨æ¥ç»™å…ƒç´ æˆ–å­ç»„ä»¶æ³¨å†Œå¼•ç”¨ä¿¡æ¯ï¼ˆid çš„æ›¿ä»£è€…ï¼‰

- åº”ç”¨åœ¨ html æ ‡ç­¾ä¸Šè·å–çš„æ˜¯çœŸå® DOM å…ƒç´ ï¼Œåº”ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šè·å–çš„æ˜¯ç»„ä»¶å®ä¾‹å¯¹è±¡ vc
- ä½¿ç”¨æ–¹å¼
  1. æ‰“æ ‡è¯†ï¼š`<h1 ref="xxx"></h1>æˆ–<School ref="xxx"></School>`
  2. è·å–ï¼šthis.$refs.xxx

## props é…ç½®é¡¹

props è®©ç»„ä»¶æ¥æ”¶å¤–éƒ¨ä¼ è¿‡æ¥çš„æ•°æ®

- ä¼ é€’æ•°æ®`<Demo name="xxx" :age="18"/>`è¿™é‡Œ age å‰åŠ `:`ï¼Œé€šè¿‡ v-bind ä½¿å¾—é‡Œé¢çš„ 18 æ˜¯æ•°å­—
- æ¥æ”¶æ•°æ®
  ç¬¬ä¸€ç§æ–¹å¼ï¼ˆåªæ¥æ”¶ï¼‰`props:['name', 'age']`
  ç¬¬äºŒç§æ–¹å¼ï¼ˆé™åˆ¶ç±»å‹ï¼‰`props:{name:String, age:Number}`
  ç¬¬ä¸‰ç§æ–¹å¼ï¼ˆé™åˆ¶ç±»å‹ã€é™åˆ¶å¿…è¦æ€§ã€æŒ‡å®šé»˜è®¤å€¼ï¼‰
  ```javascript
  props: {
     name: {
        type: String,	 // ç±»å‹
        required: true,  // å¿…è¦æ€§
        default: 'dtz'   // é»˜è®¤å€¼
     }
  }
  ```

å¤‡æ³¨ï¼š`props æ˜¯åªè¯»çš„`ï¼ŒVue åº•å±‚ä¼šç›‘æµ‹ä½ å¯¹ props çš„ä¿®æ”¹ï¼Œå¦‚æœè¿›è¡Œäº†ä¿®æ”¹ï¼Œå°±ä¼šå‘å‡ºè­¦å‘Šï¼Œè‹¥ä¸šåŠ¡éœ€æ±‚ç¡®å®éœ€è¦ä¿®æ”¹ï¼Œé‚£ä¹ˆè¯·å¤åˆ¶ props çš„å†…å®¹åˆ° data ä¸­ï¼Œç„¶åå»ä¿®æ”¹ data ä¸­çš„æ•°æ®

## mixin æ··å…¥

1. åŠŸèƒ½ï¼šå¯ä»¥æŠŠå¤šä¸ªç»„ä»¶å…±ç”¨çš„é…ç½®æå–æˆä¸€ä¸ªæ··å…¥å¯¹è±¡
2. ä½¿ç”¨æ–¹å¼
   a. å®šä¹‰æ··å…¥
   ```javascript
   const mixin = {
    data() {....},
    methods: {....}
    ....
   }
   ```
   b. ä½¿ç”¨æ··å…¥
   - å…¨å±€æ··å…¥`Vue.mixin(xxx)`
   - å±€éƒ¨æ··å…¥`mixins:['xxx']`
3. å¤‡æ³¨

   1. ç»„ä»¶å’Œæ··å…¥å¯¹è±¡å«æœ‰åŒåé€‰é¡¹æ—¶ï¼Œè¿™äº›é€‰é¡¹å°†ä»¥æ°å½“çš„æ–¹å¼è¿›è¡Œâ€œåˆå¹¶â€ï¼Œåœ¨å‘ç”Ÿå†²çªæ—¶ä»¥ç»„ä»¶ä¼˜å…ˆ

   ```javascript
   var mixin = {
     data: function () {
       return {
         message: "hello",
         name: "dtz",
       };
     },
   };
   new Vue({
     mixins: [mixin],
     data() {
       return {
         message: "goodbye",
         address: "åŒ—äº¬",
       };
     },
     created() {
       console.log(this.$data);
       // => { message: "goodbye", name: "dtz", address: "åŒ—äº¬" }
     },
   });
   ```

4. åŒåç”Ÿå‘½å‘¨æœŸé’©å­å°†åˆå¹¶ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œå› æ­¤éƒ½å°†è¢«è°ƒç”¨ã€‚å¦å¤–ï¼Œæ··å…¥å¯¹è±¡çš„é’©å­å°†åœ¨ç»„ä»¶è‡ªèº«é’©å­ä¹‹å‰è°ƒç”¨

```javascript
var mixin = {
  created() {
    console.log("æ··å…¥å¯¹è±¡çš„é’©å­è¢«è°ƒç”¨");
  },
};

new Vue({
  mixins: [mixin],
  created() {
    console.log("ç»„ä»¶é’©å­è¢«è°ƒç”¨");
  },
});

// => "æ··å…¥å¯¹è±¡çš„é’©å­è¢«è°ƒç”¨"
// => "ç»„ä»¶é’©å­è¢«è°ƒç”¨"
```

## plugin æ’ä»¶

1. åŠŸèƒ½ï¼šç”¨äºå¢å¼º Vue
2. æœ¬è´¨ï¼šåŒ…å« install æ–¹æ³•çš„ä¸€ä¸ªå¯¹è±¡ï¼Œinstall çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ Vueï¼Œç¬¬äºŒä¸ªä»¥åçš„å‚æ•°æ˜¯æ’ä»¶ä½¿ç”¨è€…ä¼ é€’çš„æ•°æ®
3. å®šä¹‰æ’ä»¶ï¼ˆè§ä¸‹ `src/plugin.js`ï¼‰
4. ä½¿ç”¨æ’ä»¶ï¼š`Vue.use()`

## scoped æ ·å¼

1. ä½œç”¨ï¼šè®©æ ·å¼åœ¨å±€éƒ¨ç”Ÿæ•ˆï¼Œé˜²æ­¢å†²çª
2. å†™æ³•ï¼š`<style scoped>`
   Vue ä¸­çš„ webpack å¹¶æ²¡æœ‰å®‰è£…æœ€æ–°ç‰ˆï¼Œå¯¼è‡´æœ‰äº›æ’ä»¶ä¹Ÿä¸èƒ½é»˜è®¤å®‰è£…æœ€æ–°ç‰ˆï¼Œ
   å¦‚ `npm i less-loader@7`ï¼Œè€Œä¸æ˜¯æœ€æ–°ç‰ˆ

> æŸ¥çœ‹ç‰ˆæœ¬`npm view vue versions`

## æ€»ç»“ TodoList æ¡ˆä¾‹

1. ç»„ä»¶åŒ–ç¼–ç æµç¨‹:
   1. æ‹†åˆ†é™æ€ç»„ä»¶:ç»„ä»¶è¦æŒ‰ç…§åŠŸèƒ½ç‚¹æ‹†åˆ†ï¼Œå‘½åä¸è¦ä¸ html å…ƒç´ å†²çªã€‚
   2. å®ç°åŠ¨æ€ç»„ä»¶:è€ƒè™‘å¥½æ•°æ®çš„å­˜æ”¾ä½ç½®ï¼Œæ•°æ®æ˜¯ä¸€ä¸ªç»„ä»¶åœ¨ç”¨ï¼Œè¿˜æ˜¯ä¸€äº›ç»„ä»¶åœ¨ç”¨:
      1. ä¸€ä¸ªç»„ä»¶åœ¨ç”¨:æ”¾åœ¨ç»„ä»¶è‡ªèº«å³å¯ã€‚
      2. ä¸€äº›ç»„ä»¶åœ¨ç”¨:æ”¾åœ¨ä»–ä»¬å…±åŒçš„çˆ¶ç»„ä»¶ä¸Š(çŠ¶æ€æå‡)ã€‚
   3. å®ç°äº¤äº’:ä»ç»‘å®šäº‹ä»¶å¼€å§‹ã€‚
2. props é€‚ç”¨äº:
   1. çˆ¶ç»„ä»¶==>å­ç»„ä»¶é€šä¿¡
   2. å­ç»„ä»¶==>çˆ¶ç»„ä»¶é€šä¿¡(è¦æ±‚çˆ¶å…ˆç»™å­ä¸€ä¸ªå‡½æ•°)
3. ä½¿ç”¨ v-model æ—¶è¦åˆ‡è®°: v-model ç»‘å®šçš„å€¼ä¸èƒ½æ˜¯ props ä¼ è¿‡æ¥çš„å€¼ï¼Œå› ä¸º props æ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„!
4. props ä¼ è¿‡æ¥çš„è‹¥æ˜¯å¯¹è±¡ç±»å‹çš„å€¼ï¼Œä¿®æ”¹å¯¹è±¡ä¸­çš„å±æ€§æ—¶ Vue ä¸ä¼šæŠ¥é”™ï¼Œä½†ä¸æ¨èè¿™æ ·åšã€‚

## WebStorageï¼ˆjs æœ¬åœ°å­˜å‚¨ï¼‰

1. å­˜å‚¨å†…å®¹å¤§å°ä¸€èˆ¬æ”¯æŒ 5MB å·¦å³ï¼ˆä¸åŒæµè§ˆå™¨å¯èƒ½è¿˜ä¸ä¸€æ ·ï¼‰
2. æµè§ˆå™¨ç«¯é€šè¿‡ Window.sessionStorage å’Œ Window.localStorage å±æ€§æ¥å®ç°æœ¬åœ°å­˜å‚¨æœºåˆ¶
3. ç›¸å…³ API
   1. xxxStorage.setItem('key', 'value')è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªé”®å’Œå€¼ä½œä¸ºå‚æ•°ï¼Œä¼šæŠŠé”®å€¼å¯¹æ·»åŠ åˆ°å­˜å‚¨ä¸­ï¼Œå¦‚æœé”®åå­˜åœ¨ï¼Œåˆ™æ›´æ–°å…¶å¯¹åº”çš„å€¼
   2. xxxStorage.getItem('key')è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªé”®åä½œä¸ºå‚æ•°ï¼Œè¿”å›é”®åå¯¹åº”çš„å€¼
   3. xxxStorage.removeItem('key')è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªé”®åä½œä¸ºå‚æ•°ï¼Œå¹¶æŠŠè¯¥é”®åä»å­˜å‚¨ä¸­åˆ é™¤
   4. xxxStorage.clear()è¯¥æ–¹æ³•ä¼šæ¸…ç©ºå­˜å‚¨ä¸­çš„æ‰€æœ‰æ•°æ®
4. å¤‡æ³¨
   1. SessionStorage å­˜å‚¨çš„å†…å®¹ä¼šéšç€æµè§ˆå™¨çª—å£å…³é—­è€Œæ¶ˆå¤±
   2. LocalStorage å­˜å‚¨çš„å†…å®¹ï¼Œéœ€è¦æ‰‹åŠ¨æ¸…é™¤æ‰ä¼šæ¶ˆå¤±
   3. xxxStorage.getItem(xxx)å¦‚æœ xxx å¯¹åº”çš„ value è·å–ä¸åˆ°ï¼Œé‚£ä¹ˆ getItem()çš„è¿”å›å€¼æ˜¯ null
   4. JSON.parse(null)çš„ç»“æœä¾ç„¶æ˜¯ null

## ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶

1. ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äºï¼š`å­ç»„ä»¶ ===> çˆ¶ç»„ä»¶`
2. ä½¿ç”¨åœºæ™¯ï¼šå­ç»„ä»¶æƒ³ç»™çˆ¶ç»„ä»¶ä¼ æ•°æ®ï¼Œé‚£ä¹ˆå°±è¦åœ¨çˆ¶ç»„ä»¶ä¸­ç»™å­ç»„ä»¶ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼ˆäº‹ä»¶çš„å›è°ƒåœ¨ A ä¸­ï¼‰
3. ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶
   1. ç¬¬ä¸€ç§æ–¹å¼ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ `<Demo @äº‹ä»¶å="æ–¹æ³•"/>æˆ–<Demo v-on:äº‹ä»¶å="æ–¹æ³•"/>`
   2. ç¬¬äºŒç§æ–¹å¼ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ `this.$refs.demo.$on('äº‹ä»¶å',æ–¹æ³•)`
   ```javascript
   <Demo ref="demo"/>
   ......
   mounted(){
     this.$refs.demo.$on('atguigu',this.test)
   }
   ```
   3. è‹¥æƒ³è®©è‡ªå®šä¹‰äº‹ä»¶åªèƒ½è§¦å‘ä¸€æ¬¡ï¼Œå¯ä»¥ä½¿ç”¨ `once` ä¿®é¥°ç¬¦ï¼Œæˆ– `$once` æ–¹æ³•
4. è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ `this.$emit` ('äº‹ä»¶å',æ•°æ®)
5. è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶ `this.$off` ('äº‹ä»¶å')
6. ç»„ä»¶ä¸Šä¹Ÿå¯ä»¥ç»‘å®šåŸç”Ÿ DOM äº‹ä»¶ï¼Œéœ€è¦ä½¿ç”¨ native ä¿®é¥°ç¬¦ `@click.native="show"`
   ä¸Šé¢ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼Œå³ä½¿ç»‘å®šçš„æ˜¯åŸç”Ÿäº‹ä»¶ä¹Ÿä¼šè¢«è®¤ä¸ºæ˜¯è‡ªå®šä¹‰çš„ï¼Œéœ€è¦åŠ  nativeï¼ŒåŠ äº†åå°±å°†æ­¤äº‹ä»¶ç»™ç»„ä»¶çš„æ ¹å…ƒç´ 
7. æ³¨æ„ï¼šé€šè¿‡ `this.$refs.xxx.$on` ('äº‹ä»¶å',å›è°ƒå‡½æ•°)ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶æ—¶ï¼Œå›è°ƒå‡½æ•°è¦ä¹ˆé…ç½®åœ¨ `methods` ä¸­ï¼Œè¦ä¹ˆç”¨ç®­å¤´å‡½æ•°ï¼Œå¦åˆ™ this æŒ‡å‘ä¼šå‡ºé—®é¢˜

## å…¨å±€äº‹ä»¶æ€»çº¿ï¼ˆGlobalEventBusï¼‰

ä¸€ç§å¯ä»¥åœ¨ä»»æ„ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶

1. æ‰€æœ‰çš„ç»„ä»¶å¯¹è±¡éƒ½å¿…é¡»èƒ½çœ‹è§ä»–
2. è¿™ä¸ªå¯¹è±¡å¿…é¡»èƒ½å¤Ÿä½¿ç”¨$on$emit$off æ–¹æ³•å»ç»‘å®šã€è§¦å‘å’Œè§£ç»‘äº‹ä»¶

ä½¿ç”¨æ­¥éª¤

1. å®šä¹‰å…¨å±€äº‹ä»¶æ€»çº¿

   ```javascript
   new Vue({
       ...
       beforeCreate() {
         Vue.prototype.$bus = this // å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿ï¼Œ$bus å°±æ˜¯å½“å‰åº”ç”¨çš„ vm
       },
       ...
   })
   ```

2. ä½¿ç”¨äº‹ä»¶æ€»çº¿

a.æ¥æ”¶æ•°æ®ï¼š
A ç»„ä»¶æƒ³æ¥æ”¶æ•°æ®ï¼Œåˆ™åœ¨ A ç»„ä»¶ä¸­ç»™$bus ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼Œäº‹ä»¶çš„å›è°ƒç•™åœ¨ A ç»„ä»¶è‡ªèº«

```javascript
export default {
    methods(){
        demo(data){...}
    }
    ...
    mounted() {
        this.$bus.$on('xxx',this.demo)
    }
}
```

b. æä¾›æ•°æ®ï¼šthis.$bus.$emit('xxx',data)

3. æœ€å¥½åœ¨ beforeDestroy é’©å­ä¸­ï¼Œç”¨$off()å»è§£ç»‘å½“å‰ç»„ä»¶æ‰€ç”¨åˆ°çš„äº‹ä»¶

src/main.js

```
import Vue from 'vue'
import App from './App.vue'

Vue.config.productionTip = false

new Vue({
  el:'#app',
  render: h => h(App),
  beforeCreate() {
    Vue.prototype.$bus = this // å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿
  }
})
```

src/App.vue

```
<template>
	<div class="app">
		<School/>
		<Student/>
	</div>
</template>

<script>
	import Student from './components/Student'
	import School from './components/School'

	export default {
		name:'App',
		components:{ School, Student }
	}
</script>

<style scoped>.app{background-color: gray;padding: 5px;}</style>
```

src/components/School.vue

```
<template>
  <div class="school">
    <h2>å­¦æ ¡åç§°ï¼š{{ name }}</h2>
    <h2>å­¦æ ¡åœ°å€ï¼š{{ address }}</h2>
  </div>
</template>

<script>
  export default {
    name: "School",
    data() {
      return {
        name: "å°šç¡…è°·",
        address: "åŒ—äº¬",
      };
    },
    mounted() {  //ğŸ”´
      // console.log('School',this)
      this.$bus.$on("hello", (data) => {
        console.log("æˆ‘æ˜¯Schoolç»„ä»¶ï¼Œæ”¶åˆ°äº†æ•°æ®", data);
      });
    },
    beforeDestroy() {  //ğŸ”´
      this.$bus.$off("hello");
    },
  };
</script>

<style scoped>.school {background-color: skyblue;padding: 5px;}</style>
```

src/components/Student.vue

```
<template>
  <div class="student">
    <h2>å­¦ç”Ÿå§“åï¼š{{ name }}</h2>
    <h2>å­¦ç”Ÿæ€§åˆ«ï¼š{{ sex }}</h2>
    <button @click="sendStudentName">æŠŠå­¦ç”Ÿåç»™Schoolç»„ä»¶</button> //ğŸ”´
  </div>
</template>

<script>
  export default {
    name:'Student',
    data() {
      return {
        name:'å¼ ä¸‰',
        sex:'ç”·'
      }
    },
    methods: {  //ğŸ”´
      sendStudentName(){
        this.$bus.$emit('demo', this.name)
      }
    }
  }
</script>

<style scoped>.student{background-color: pink;padding: 5px;margin-top: 30px;}</style>
```
